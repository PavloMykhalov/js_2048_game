var e=document.querySelectorAll(".field-cell"),r=document.querySelector(".button.start"),n=document.querySelector(".game-score"),t=document.querySelector(".message.message-start"),o=document.querySelector(".message.message-lose"),a=document.querySelector(".message.message-win"),c=0,f=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];function i(){var r=Array.from(e).filter(function(e){return""===e.innerText});if(0!==r.length){var n=r[Math.floor(Math.random()*r.length)],t=n.parentElement.rowIndex,o=n.cellIndex;0===f[t][o]?(f[t][o]=.9>Math.random()?2:4,n.innerText=f[t][o].toString()):0!==f[t][o]&&i()}}function u(){f.forEach(function(r,n){r.forEach(function(r,t){var o=e[4*n+t];o.innerText=0===r?"":r,o.className=0===r?"field-cell":"field-cell field-cell--".concat(r)})}),n.innerText=c}function s(e){for(var r=l(e),n=0;n<r.length-1;n++)r[n]===r[n+1]&&(r[n]*=2,r[n+1]=0,c+=r[n]);for(r=l(r);r.length<4;)r.push(0);return r}function l(e){return e.filter(function(e){return 0!==e})}function d(e,r,n){switch(n){case"up":return e>0&&f[e][r]===f[e-1][r];case"down":return e<3&&f[e][r]===f[e+1][r];case"left":return r>0&&f[e][r]===f[e][r-1];case"right":return r<3&&f[e][r]===f[e][r+1];default:return!1}}r.addEventListener("click",function(){f=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],e.forEach(function(e){e.innerText=""}),i(),i(),c=0,u(),r.classList.remove("start"),r.classList.add("restart"),r.innerText="Restart",t.classList.add("hidden"),o.classList.add("hidden")}),document.addEventListener("keydown",function(e){return function(e){e.preventDefault();var r=JSON.parse(JSON.stringify(f)),n=!1;switch(e.key){case"ArrowUp":(function(){for(var e=0;e<4;e++){for(var r=[],n=0;n<4;n++)r.push(f[n][e]);r=s(r);for(var t=0;t<4;t++)f[t][e]=r[t]}})();break;case"ArrowDown":(function(){for(var e=0;e<4;e++){for(var r=[],n=3;n>=0;n--)r.push(f[n][e]);r=s(r);for(var t=3;t>=0;t--)f[t][e]=r.shift()}})();break;case"ArrowLeft":f.forEach(function(e,r){var n=s(e);f[r]=n});break;case"ArrowRight":f.forEach(function(e,r){var n=s(e.slice().reverse());f[r]=n.slice().reverse()})}!function(e,r){var n=function(n){if(!e[n].every(function(e,t){return e===r[n][t]}))return{v:!1}};if(e.length!==r.length)return!1;for(var t=0;t<e.length;t++){var o=n(t);if("object"==(o&&"undefined"!=typeof Symbol&&o.constructor===Symbol?"symbol":typeof o))return o.v}return!0}(r,f)&&(n=!0),n&&i(),u(),function(){for(var e=0;e<4;e++)for(var r=0;r<4;r++)if(2048===f[e][r])return a.classList.remove("hidden"),!0}(),function(){for(var e=0;e<4;e++)for(var r=0;r<4;r++)if(0===f[e][r])return!0;return!1}()||function(){for(var e=0;e<3;e++)for(var r=0;r<3;r++)if(f[e][r]===f[e+1][r]||f[e][r]===f[e][r+1]||d(e,r,"up")||d(e,r,"down")||d(e,r,"left")||d(e,r,"right"))return!0;return!1}()||o.classList.remove("hidden")}(e)});
//# sourceMappingURL=index.2f392a65.js.map
